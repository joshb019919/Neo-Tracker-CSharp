@model IEnumerable<Neo_Tracker_C_.Models.NearEarthObject>
@{
    ViewData["Title"] = "Near Earth Objects";
}

<!-- Head section -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <link rel="icon" type="image/x-icon" href="~/favicon.ico" />

<div class="container" style="background-color:#fafafa;">

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light py-1 mb-3 text-uppercase fs-1 rounded-bottom mb-5 border-bottom border-3 border-primary" style="background-color:#e3f2fd;">
        <a asp-controller="NeoTracker" class="navbar-brand">
            <img class="bg-dark navbar-brand rounded-circle border border-3 border-primary mx-3" src="~/img/earth_from_space_small.png" alt="earth from space"/>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="row mx-auto navbar-nav me-auto mb-2 mb-lg-0 align-items-center ">
                <li class="col-auto px-5 nav-item">
                    <a class="nav-link active" aria-current="page" asp-controller="NeoTracker">Home</a>
                </li>
                <li class="col-auto px-5 nav-item">
                    <a class="nav-link" href="#">History</a>
                </li>
                <li class="col-auto px-5 nav-item">
                    <a class="nav-link" href="#">Dark Mode</a>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Form -->
    <form class="rounded p-4 mb-3 w-100 w-md-25" style="background-color:#e3f2fd;" asp-action="Index" method="get">
        <div class="row mb-3">
            <div class="col-12 col-md-6">
                <label for="start-date" class="form-label">Start Date</label>
                <input type="date" id="start-date" name="startDate" class="form-control form-control-lg" aria-describedby="dateHelp1" required value="@Context.Request.Query["startDate"]">
            </div>
            <div class="col-12 col-md-6">
                <label for="end-date" class="form-label">End Date (Max 7 Days)</label>
                <input type="date" id="end-date" name="endDate" class="form-control form-control-lg" aria-describedby="dateHelp2" value="@Context.Request.Query["endDate"]">
            </div>
        </div>
        <div class="row">
            <button type="submit" id="submit" class="btn btn-lg btn-primary mt-3">Submit</button>
        </div>
    </form>

    <!-- Table -->
    <table class="table table-striped table-sm mt-5" style="background-color:#e3f2fd;">
        <caption>Near Earth Object Data</caption>
        <thead>
        <tr>
            <th scope="col">ID</th>
            <th scope="col">NAME</th>
            <th scope="col">WIDEST(km)</th>
            <th scope="col">WIDEST(ft)</th>
            <th scope="col">HAZARDOUS</th>
            <th scope="col">CLOSEST APPROACH</th>
            <th scope="col">VELOCITY(kps)</th>
            <th scope="col">VELOCITY(Kmph)</th>
            <th scope="col">MISSED BY(Mmi)</th>
            <th scope="col">ORBITING</th>
            <th scope="col">SENTRY</th>
        </tr>
        </thead>
        <tbody>
        @if (Model != null && Model.Any())
        {
            foreach (var neo in Model)
            {
                <tr>
                    <td>@neo.Id</td>
                    <td>@neo.Name</td>
                    <td>@neo.EstimatedDiameterMax</td>
                    <td>@(neo.EstimatedDiameterMax * 3280.84)</td>
                    <td>@(neo.IsPotentiallyHazardousAsteroid ? "Yes" : "No")</td>
                    <td>@neo.CloseApproachDate.ToShortDateString()</td>
                    <td>@neo.RelativeVelocity</td>
                    <td>@(neo.RelativeVelocity * 3600)</td>
                    <td>@neo.MissDistance</td>
                    <td>@neo.OrbitingBody</td>
                    <td>-</td>
                </tr>
            }
        }
        else
        {
            <tr><td colspan="11" class="text-center">No data available.</td></tr>
        }
        </tbody>
    </table>

    <!-- Footer -->
    <footer class="text-center mt-3">
        <strong>
            <p>&copy; 2025 : Josh Borthick</p>
        </strong>
    </footer>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
